---                                                                                                                                                                                                         
apiVersion: extensions/v1                                                                                                                                                                                   
kind: Deployment                                                                                                                                                                                            
metadata:                                                                                                                                                                                                   
  labels:                                                                                                                                                                                                   
    app: clover-sample                                                                                                                                                                                      
    cluster: sample-backend-prod                                                                                                                                                                            
    detail: prod                                                                                                                                                                                            
    stack: backend                                                                                                                                                                                          
  name: sample-backend-prod                                                                                                                                                                                 
  namespace: __NAMESPACE_PROD__                                                                                                                                                                             
spec:                                                                                                                                                                                                       
  replicas: __REPLICAS_PROD__                                                                                                                                                                               
  strategy:                                                                                                                                                                                                 
    rollingUpdate:                                                                                                                                                                                          
      maxSurge: 25%                                                                                                                                                                                         
      maxUnavailable: 25%                                                                                                                                                                                   
    type: RollingUpdate                                                                                                                                                                                     
  template:                                                                                                                                                                                                 
    metadata:                                                                                                                                                                                               
      labels:                                                                                                                                                                                               
        app: sample                                                                                                                                                                                         
        cluster: sample-backend-prod                                                                                                                                                                        
        detail: prod                                                                                                                                                                                        
        stack: backend                                                                                                                                                                                      
    spec:                                                                                                                                                                                                   
      containers:                                                                                                                                                                                           
      - env:                                                                                                                                                                                                
        - name: COMPONENT                                                                                                                                                                                   
          value: backend                                                                                                                                                                                    
        - name: VERSION                                                                                                                                                                                     
          value: __IMAGE_VER__                                                                                                                                                                              
        image: opnfv/clover-sample-app:__IMAGE_VER__                                                                                                                                                        
        name: sample-app                                                                                                                                                                                    
        ports:                                                                                                                                                                                              
        - containerPort: 80                                                                                                                                                                                 
          name: http                                                                                                                                                                                        
          protocol: TCP                                                                                                                                                                                     
---
apiVersion: extensions/v1                                                                                                                                                                                   
kind: Deployment                                                                                                                                                                                            
metadata:                                                                                                                                                                                                   
  labels:                                                                                                                                                                                                   
    app: clover-sample                                                                                                                                                                                      
    cluster: sample-frontend-prod                                                                                                                                                                           
    detail: prod                                                                                                                                                                                            
    stack: frontend                                                                                                                                                                                         
  name: sample-frontend-prod                                                                                                                                                                                
  namespace: __NAMESPACE_PROD__                                                                                                                                                                             
spec:                                                                                                                                                                                                       
  replicas: __REPLICAS_PROD__                                                                                                                                                                               
  strategy:                                                                                                                                                                                                 
    rollingUpdate:                                                                                                                                                                                          
      maxSurge: 25%                                                                                                                                                                                         
      maxUnavailable: 25%                                                                                                                                                                                   
    type: RollingUpdate                                                                                                                                                                                     
  template:                                                                                                                                                                                                 
    metadata:                                                                                                                                                                                               
      labels:                                                                                                                                                                                               
        app: sample                                                                                                                                                                                         
        cluster: sample-frontend-prod                                                                                                                                                                       
        detail: prod                                                                                                                                                                                        
        stack: frontend                                                                                                                                                                                     
    spec:                                                                                                                                                                                                   
      containers:                                                                                                                                                                                           
      - env:                                                                                                                                                                                                
        - name: COMPONENT                                                                                                                                                                                   
          value: frontend                                                                                                                                                                                   
        - name: VERSION                                                                                                                                                                                     
          value: __IMAGE_VER__                                                                                                                                                                              
        - name: BACKEND_URL                                                                                                                                                                                 
          value: http://sample-backend-prod:8080/metadata                                                                                                                                                   
        image: opnfv/clover-sample-app:__IMAGE_VER__                                                                                                                                                        
        name: sample-app                                                                                                                                                                                    
        ports:                                                                                                                                                                                              
        - containerPort: 80                                                                                                                                                                                 
          name: http                                                                                                                                                                                        
          protocol: TCP 
